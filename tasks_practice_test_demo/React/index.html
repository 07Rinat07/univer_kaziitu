<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
    <style>
        button{
            width: 100px;
            height:30px;
            border-radius: 4px;
            margin:50px;
        }
        .on{
            color:#666;
            background-color: #ccc;
        }
        .off{
            color:#888;
            background-color: white;
        }
    </style>
</head>
<body>
    <div id="app"></div>
 
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
 
    <script type="text/babel" data-type="module">
        import React from "https://esm.sh/react@19?dev";
        import ReactDOM from "https://esm.sh/react-dom@19/client?dev";
 
        function ClickButton(props) {
               
            const [buttonClass, setButtonClass] = React.useState("off");
            const [didMount, setDidMount] = React.useState(false);
 
            // имитация конструктора 
            if (!didMount) {
                console.log("constructor");
            } 
 
            // componentDidMount | componentWillUnmount
            React.useEffect(() => {    
                  
                console.log("componentDidMount");   // действия после монтирования компонента
                setDidMount(true); // устанавливаем, чтобы избежать повторного вызова функции, которая имитирует конструктор
 
                return()=>{
                    console.log("componentWillUnmount");  // действия при удалении компонента
                }
            }, []);
 
            // отслеживаем все изменения компонента 
            React.useEffect(() => {    
                  
                console.log("componentDidUpdate"); // действия при обновлении компонента
            });
 
           function press(){
               const className = (buttonClass==="off")?"on":"off";
               setButtonClass({buttonClass: className});
           }
 
            // действия при рендеринге компонента
           return (
                <>
                    {console.log("render()")}       
                    <button onClick={press} className={buttonClass}>Нажми</button>
                </>
           );
       }
       ReactDOM.createRoot(
            document.getElementById("app")
        )
        .render(
           <ClickButton />
       );
    </script>
</body>
</html>