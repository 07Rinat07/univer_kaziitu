<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <div id="app"></div>
 
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
 
    <script type="text/babel" data-type="module">
    import React from "https://esm.sh/react@19?dev";
    import ReactDOM from "https://esm.sh/react-dom@19/client?dev";
         
    class NameField extends React.Component {
        constructor(props) {
            super(props);
            this.state = {value: props.value, valid: this.validate(props.value)};
        }
        validate(val) { return val.length>2;}
        onChange = (e)  => {
            const val = e.target.value;
            const isValid = this.validate(val);
            this.setState({value: val, valid: isValid});
        }
        render() {
            return <p>
                <label>Имя:</label><br />
                <input value={this.state.value} onChange={this.onChange} 
                    style={{borderColor: this.state.valid?"green":"red"}} />
            </p>;
        }   
    }
    class AgeField extends React.Component {
         
        constructor(props) {
            super(props);
            this.state = {value: props.value, valid: this.validate(props.value)};
        }
        validate (val){ return val > 0; }
 
        onChange = (e) =>{
            const val = e.target.value;
            const isValid = this.validate(val);
            this.setState({value: val, valid: isValid});
        }
        render() {
            return <p>
                <label>Возраст:</label><br />
                <input type="number" value={this.state.value} onChange={this.onChange} 
                    style={{borderColor: this.state.valid?"green":"red"}} />
            </p>;
        }   
    }
       
    class UserForm extends React.Component {
        constructor(props) {
            super(props);
            this.nameField = React.createRef();
            this.ageField = React.createRef();
        }
 
        handleSubmit = (e) =>{
            e.preventDefault();
             
            const nameIsValid = this.nameField.current.state.valid;
            const ageIsValid = this.ageField.current.state.valid;
 
            if(nameIsValid && ageIsValid){
                const name = this.nameField.current.state.value;
                const age = this.ageField.current.state.value;
                console.log(`Имя: ${name} Возраст: ${age}`);
            }
            else console.log("Некорректные данные");
        }
   
        render() {
            return (
                <form onSubmit={this.handleSubmit}>
                    <NameField value="" ref={this.nameField} />
                    <AgeField value="1" ref={this.ageField} />
                    <input type="submit" value="Отправить" />
            </form>
        );
      }
    }
    ReactDOM.createRoot(
        document.getElementById("app")
    )
    .render(
        <UserForm />
    );
    </script>
</body>
</html>