
<!--Для выполнения заданий по созданию и заполнению базы данных деканата для студентов, а также по выборке данных, выполните следующие шаги.

Л.р. №1. Создание и заполнение отношений
1. Таблица "Дисциплины" (Disciplines)
Создадим таблицу для хранения дисциплин с шифром и названием дисциплины.

sql

CREATE TABLE Disciplines (
    discipline_code CHAR(8) PRIMARY KEY,  -- Шифр дисциплины
    name VARCHAR(100)                    -- Название дисциплины
);
2. Таблица "Студенты" (Students)
Таблица для хранения информации о студентах. Включает номер зачётной книжки, ФИО, год поступления, группу, курс, средний балл, форму обучения и академический отпуск.

sql

CREATE TABLE Students (
    record_book_number CHAR(10) PRIMARY KEY,  -- Номер зачётной книжки
    full_name VARCHAR(50) NOT NULL,           -- ФИО студента
    admission_year INT NOT NULL,              -- Год поступления
    group_code CHAR(7) NOT NULL,              -- Группа
    course INT(1) NOT NULL,                   -- Курс
    average_score DECIMAL(3,1),               -- Средний балл
    study_form CHAR(8) DEFAULT 'дневная',    -- Форма обучения (по умолчанию дневная)
    academic_leave INT(1) DEFAULT 0           -- Академический отпуск (по умолчанию 0)
);
3. Таблица "Сессия" (Exams)
Таблица для хранения информации о сессии, которая включает группу, шифр дисциплины (внешний ключ), дату экзамена, аудиторию и преподавателя.

sql

CREATE TABLE Exams (
    group_code CHAR(7),               -- Группа
    discipline_code CHAR(8),          -- Шифр дисциплины (внешний ключ)
    exam_date DATE,                   -- Дата экзамена
    classroom INT(3),                 -- Аудитория
    examiner VARCHAR(100),            -- Преподаватель
    PRIMARY KEY (group_code, discipline_code, exam_date),  -- Композитный первичный ключ
    FOREIGN KEY (discipline_code) REFERENCES Disciplines(discipline_code)  -- Внешний ключ
);
Л.р. №2. Выборка данных
1. Проверка уникальности комбинации "Дата" и "Аудитория"
Для проверки уникальности комбинации "Дата" и "Аудитория" можно использовать запрос с группировкой и подсчетом количества записей. Если количество записей больше 1, это значит, что для данной даты и аудитории назначено несколько экзаменов.

sql

SELECT exam_date, classroom, COUNT(*)
FROM Exams
GROUP BY exam_date, classroom
HAVING COUNT(*) > 1;
Этот запрос возвращает все комбинации "Дата" и "Аудитория", которые встречаются несколько раз.

2. Создание расписания экзаменов на сессию для произвольной группы
Для создания расписания экзаменов для произвольной группы (например, "Группа1"), можно выполнить запрос, который выводит все экзамены, связанные с этой группой:

sql

SELECT e.exam_date, e.classroom, d.name AS discipline, e.examiner
FROM Exams e
JOIN Disciplines d ON e.discipline_code = d.discipline_code
WHERE e.group_code = 'Группа1'
ORDER BY e.exam_date;
Этот запрос создает расписание экзаменов для группы "Группа1", сортируя по дате экзаменов.

3. Создание упорядоченных списков
Студенты групп ‘С’ второго курса (без находящихся в академическом отпуске)
Для того чтобы создать список студентов группы "С" второго курса, которые не находятся в академическом отпуске, можно использовать следующий запрос:

sql

SELECT full_name, record_book_number, average_score
FROM Students
WHERE group_code = 'С' AND course = 2 AND academic_leave = 0
ORDER BY full_name;
Этот запрос возвращает список студентов второго курса группы "С", отсортированный по ФИО, и исключает студентов, находящихся в академическом отпуске.

Студенты с наибольшим средним баллом в своей группе
Для того чтобы найти студентов с наибольшим средним баллом в каждой группе, можно воспользоваться запросом с использованием подзапроса и группировки:

sql

SELECT s.full_name, s.record_book_number, s.average_score, s.group_code
FROM Students s
WHERE s.average_score = (
    SELECT MAX(average_score)
    FROM Students
    WHERE group_code = s.group_code
)
ORDER BY s.group_code;
Этот запрос выбирает студентов с наибольшим средним баллом в каждой группе и сортирует их по группе.-->